<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
<!-- link font awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Lato:ital,wght@0,100;0,300;0,400;0,700;0,900;1,100;1,300;1,400;1,700;1,900&display=swap" rel="stylesheet">

  <!-- vue 3.js -->
  <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>

  <link rel="stylesheet" href="css/style.css">

  <title>Boolzapp</title>

</head>


<body id="app">

  <div class="row d-flex">
    <div class="col left d-flex d-column">
      <div class="col profile d-flex d-between align-center">
<!-- colonna grigia di sinistra sopra  -->
        <div class="col icon  margin-left-s">
          <img src="assets/img/avatar_io.jpg" alt="">
        </div>
        <div class="col action d-flex d-between margin-right-m">
          <i class="fa-solid fa-circle-notch"></i>
          <i class="fa-solid fa-message"></i>
          <i class="fa-solid fa-ellipsis-vertical"></i>
        </div>
      </div>
<!-- campanella -->
      <div class="col noti d-flex align-center">
        <div class="col bell d-flex d-center align-center margin-left-s">
          <i class="fa-solid fa-bell-slash"></i>
        </div>
        <div class="col noti-text margin-left-s">
          <p>Ricevi notifiche di nuovi messaggi</p>
          <a href="">Attiva notifiche dekstop</a>
        </div>
      </div>
<!-- input di ricerca -->
      <div class="col input d-flex d-center align-center">
        <div class="container d-flex">
          <div class="magnifying d-flex align-center d-center">
            <i class="fa-solid fa-magnifying-glass"></i>
          </div> 
          <div class="search d-flex align-center">
            <input type="text" placeholder="Cerca o inizia una nuova chat">
          </div>
        </div>
      </div>
<!-- colonna chat -->
      <div class="col chat">


        <!-- un contatto -->
        <div
          @click="getIdChat(index), console.log(counterContact)"
          class="col personal d-flex align-center"
          v-for="(contact,index) in contacts">
          <div class="icon margin-left-s">
            <img :src="contact.avatar" alt="">
          </div>
          <div class="name margin-left-s">
            <p>{{contact.name}}</p>
            <!-- prendo l ultimo messaggio ad indice .length-1 -->
            <p>{{contact.messages[contact.messages.length-1].message}}</p>
          </div>
          <div class="time">
            <!-- prendo l' orario dividendo la proprietÃ  in un arry di due stringhe usando lo spazio e mi prendo l' indice 1 -->
            <p>
              {{contact.messages[contact.messages.length-1].date.split(' ')[1]}}
            </p>
          </div>
        </div> 
        <!-- un contatto -->
      </div>
    </div>

    <div class="col right d-flex d-column">
      <!-- contatto sopra la chat -->
      <!-- ne stampo tutti con il v-for e poi con il counter metto quello cliccato -->
      <div class="col user d-flex d-between" v-for="(contact, index) in contacts" :class="{'hidden':index!==counterContact}">
        <!-- qua do la classe hidden se l indice non corrisponde al counteContact -->
        <div class="col personal d-flex align-center">
          <div class="icon margin-left-s">
            <img :src="contact.avatar" alt="">
          </div>
          <div class="name margin-left-s">
            <p>{{contact.name}}</p>
            <!-- qua ho fatto una rierca e con .substring uso solo le parti della stringa che mi servono -->
            <p>Ultimo accesso oggi alle  {{contact.messages[contact.messages.length-1].date.split(' ')[1].substring(0,5)}}</p>
          </div>
        </div>
        <div class="action d-flex align-center d-between margin-right-s">
          <i class="fa-solid fa-magnifying-glass"></i>
          <i class="fa-solid fa-paperclip"></i>
          <i class="fa-solid fa-ellipsis-vertical"></i>
        </div>
      </div>
      <!-- contatto sopra la chat -->
      <div class="col lecture d-flex d-column">
     
        <div class="col message d-flex" v-for="(message, index) in contacts[counterContact].messages" :class="{ 'active': sentMessages.includes(message) }">
          <div class="col text margin-left-m margin-right-m d-flex">
           
            <!-- messaggio -->
            <!-- qua stampo il messaggio dentro al dato messsage ottenuto dalla computed sentMessages() -->
            <p>{{message.message}}</p>
            <!-- messaggio -->
            
            <!-- hidden menu -->
            <div class="col chevron">
              <i class="fa-solid fa-chevron-down"></i>
              <div class="hidden-menu">
                <ul>
                  <div class="emoji d-flex d-around ">
                    <i class="fa-solid fa-thumbs-up"></i>
                    <i class="fa-solid fa-heart"></i>
                    <i class="fa-solid fa-face-grin-tears"></i>
                    <i class="fa-solid fa-face-surprise"></i>
                    <i class="fa-solid fa-face-sad-tear"></i>
                    <i class="fa-solid fa-hands-praying"></i>
                    <div class="plus d-flex d-center align-center">
                      <i class="fa-solid fa-plus"></i>
                    </div>
                  </div>
                  <div class="menu-section">
                    <li>
                      <a href="">
                        <i class="fa-solid fa-share"></i>&nbsp;Rispondi
                      </a>
                    </li>
                    <li>
                      <a href="">
                        <i class="fa-regular fa-copy"></i>&nbsp;Copia
                      </a>
                    </li>
                    <li>
                      <a href="">
                        <i class="fa-solid fa-floppy-disk"></i>&nbsp;salva con nome
                      </a>
                    </li>
                  </div>
                  <div class="menu-section">
                    <li>
                      <a href="">
                        <i class="fa-regular fa-share-from-square"></i>&nbsp;Inoltra
                      </a>
                    </li>
                    <li>
                      <a href="">
                        <i class="fa-regular fa-star"></i>&nbsp;importante
                      </a>
                    </li>
                    <li>
                      <a href="">
                        <i class="fa-solid fa-trash-can"></i>&nbsp;Elimina per me
                      </a>
                    </li>
                   
                  </div>
                  <div class="menu-section">
                    <li>
                      <a href="">
                        <i class="fa-regular fa-square-check"></i>&nbsp;Seleziona
                      </a>
                    </li>
                  </div>
                </ul>
              </div>
            </div>
            <!-- hidden menu -->
            <div class="time">
              <span>16:13</span>
            </div>
          </div>
          
         
        </div>

        <!-- <div class="col message d-flex">
          <div class="col text margin-left-m margin-right-m d-flex">
            <p>Lorem ipsum dolor sit amet consectetur, adipisicing elit. Saepe quod veritatis culpa fuga iusto necessitatibus ducimus aut tempora! Impedit nulla magnam libero, accusantium deserunt voluptas doloribus omnis sapiente dolorum minima molestiae itaque aliquam ullam nam eligendi temporibus nesciunt enim quaerat.</p>
            <div class="col chevron">
              <i class="fa-solid fa-chevron-down"></i>
              <div class="hidden-menu">
                <ul>
                  <div class="emoji d-flex d-around ">
                    <i class="fa-solid fa-thumbs-up"></i>
                    <i class="fa-solid fa-heart"></i>
                    <i class="fa-solid fa-face-grin-tears"></i>
                    <i class="fa-solid fa-face-surprise"></i>
                    <i class="fa-solid fa-face-sad-tear"></i>
                    <i class="fa-solid fa-hands-praying"></i>
                    <div class="plus d-flex d-center align-center">
                      <i class="fa-solid fa-plus"></i>
                    </div>
                  </div>
                  <div class="menu-section">
                    <li>
                      <a href="">
                        <i class="fa-solid fa-share"></i>&nbsp;Rispondi
                      </a>
                    </li>
                    <li>
                      <a href="">
                        <i class="fa-regular fa-copy"></i>&nbsp;Copia
                      </a>
                    </li>
                    <li>
                      <a href="">
                        <i class="fa-solid fa-floppy-disk"></i>&nbsp;salva con nome
                      </a>
                    </li>
                  </div>
                  <div class="menu-section">
                    <li>
                      <a href="">
                        <i class="fa-regular fa-share-from-square"></i>&nbsp;Inoltra
                      </a>
                    </li>
                    <li>
                      <a href="">
                        <i class="fa-regular fa-star"></i>&nbsp;importante
                      </a>
                    </li>
                    <li>
                      <a href="">
                        <i class="fa-solid fa-trash-can"></i>&nbsp;Elimina per me
                      </a>
                    </li>
                   
                  </div>
                  <div class="menu-section">
                    <li>
                      <a href="">
                        <i class="fa-regular fa-square-check"></i>&nbsp;Seleziona
                      </a>
                    </li>
                  </div>
                </ul>
              </div>
            </div>
            <div class="time">
              <span>16:13</span>
            </div>
          </div>
        </div> -->

      </div>
      
      <div class="col write d-flex">
        <div class="col emoji d-flex align-center d-center">
          <i class="fa-regular fa-face-smile"></i>
        </div>
        <div class="insert d-flex align-center">
          <input type="text" placeholder="Scrivi un messaggio">
        </div>
        <div class="vocal d-flex align-center d-center">
          <i class="fa-solid fa-microphone"></i>
        </div>
      </div>
    </div>
  </div>

  
</body>

<script src="js/main.js"></script>

</html>